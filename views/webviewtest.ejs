<html>
<head>
    <title>RCF Meets Members</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/style.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>
<body>
<script>
    // (function (d, s, id) {
    //     var js, fjs = d.getElementsByTagName(s)[0];
    //     if (d.getElementById(id)) {
    //         return;
    //     }
    //     js = d.createElement(s);
    //     js.id = id;
    //     js.src = "//connect.facebook.com/en_US/messenger.Extensions.js";
    //     fjs.parentNode.insertBefore(js, fjs);
    // }(document, 'script', 'Messenger'));

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/messenger.Extensions.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'Messenger'));

    window.extAsyncInit = () => {
        MessengerExtensions.getSupportedFeatures(function success(result) {
            let features = result.supported_features;
            if (features.includes("context")) {
                MessengerExtensions.getContext('429499001267322',
                    function success(thread_context) {
                        document.getElementById("psid").value = thread_context.psid;
                    },
                    function error(err) {
                        console.log(err);
                    }
                );
            }
        }, function error(err) {
            console.log(err);
        });
        document.getElementById('submitButton').addEventListener('click', () => {
            MessengerExtensions.requestCloseBrowser(function success() {
                console.log("Webview closing");
            }, function error(err) {
                console.log(err);
            });
        });
    };


</script>

<div id="form">
    <form action="/preferencespostback/<%- currUser %>" method="post">
        <input type="hidden" name="psid" id="psid">
        
          <div class="jumbotron">
            <h3 id="greeting-header"> Meet the RCF Meets Members</h3>
            <p id="greeting-info">
                Please select people you already know!
            </p>

            <h3 id="FAQ-header"> First-time here?</h3>
            <ul>
            <li>
                <a href="#" data-toggle="popover" data-trigger="focus" title="Don't know who to pick?" data-content="Select people you would like to avoid being paired with. This includes people you know super well
                and would prefer not to be paired with them so you can meet someone new - however, if there are people you already know but still want to get to know more, don't select them!
                If you don't know anyone, just click Submit!">Who should I pick?</a>
            </li>
            <li>
                <a href="#" data-toggle="popover" data-trigger="focus" title="Who will I get paired with?" data-content="Just because you select someone doesn't mean you won't get paired with them - two people both have to select each other in order to not get paired. That being said, make sure you're setting you're preferences!">How do pairings work?</a>
            </li>
            </ul>
        </div>

        <script>
        $(document).ready(function(){
            //$('[data-toggle="popover"]').popover();   
            $('[data-trigger="focus"]').popover({
                trigger: 'focus'
            })
        });
        </script>






</div>
</body>
</html>